{
"type":"Batch"
,
"children":
[
{
"type":"SqlScript"
,
"offset":"6,105"
,
"children":
[
{
"type":"QueryStatement"
,
"offset":"6,105"
,
"children":
[
{
"type":"Assignment"
,
"offset":"6,0"
,
"variable":"@postcoderows"
}
,
{
"type":"ExtractQuery"
,
"offset":"6,105"
,
"children":
[
{
"type":"ExtractFromClause"
,
"offset":"9,169"
,
"children":
[
{
"type":"SimpleStreamSpec"
,
"offset":"9,175"
,
"fileList":
[
{
"path":"C:\\Users\\seyonadmin\\AppData\\Local\\USQLDataRoot\\postcodes\/InitialDataFile.csv"
}]
}
]
}
,
{
"type":"UsingClause"
,
"offset":"10,208"
,
"children":
[
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"','"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"false"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"Encoding.UTF8"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"true"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"false"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"1"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"Expression"
,
"offset":"10,215"
,
"expressiontext":"Extractors.Csv(skipFirstNRows:1)"
}
]
}
,
{
"type":"SchemaElement"
,
"offset":"6,113"
,
"children":
[
{
"type":"Identifier"
,
"offset":"6,113"
,
"name":"Postcode"
}
,
{
"type":"ScalarTypeDefinition"
,
"offset":"6,122"
,
"name":"string"
}
]
}
,
{
"type":"SchemaElement"
,
"offset":"7,130"
,
"children":
[
{
"type":"Identifier"
,
"offset":"7,130"
,
"name":"PersonTotal"
}
,
{
"type":"ScalarTypeDefinition"
,
"offset":"7,143"
,
"name":"int"
}
]
}
,
{
"type":"SchemaElement"
,
"offset":"8,148"
,
"children":
[
{
"type":"Identifier"
,
"offset":"8,148"
,
"name":"DistrictName"
}
,
{
"type":"ScalarTypeDefinition"
,
"offset":"8,162"
,
"name":"string"
}
]
}
]
}
]
}
,
{
"type":"QueryStatement"
,
"offset":"12,266"
,
"children":
[
{
"type":"Assignment"
,
"offset":"12,249"
,
"variable":"@sumresults"
}
,
{
"type":"SelectQuery"
,
"offset":"12,266"
,
"children":
[
{
"type":"AliasedExpression"
,
"offset":"12,297"
,
"children":
[
{
"type":"Expression"
,
"offset":"12,273"
,
"expressiontext":"Postcode.Substring(0,4)"
}
,
{
"type":"Alias"
,
"offset":"12,297"
}
]
}
,
{
"type":"AliasedExpression"
,
"offset":"12,331"
,
"children":
[
{
"type":"Expression"
,
"offset":"12,314"
,
"expressiontext":"SUM(PersonTotal)"
}
,
{
"type":"Alias"
,
"offset":"12,331"
}
]
}
,
{
"type":"TableFromClause"
,
"offset":"13,344"
,
"children":
[
{
"type":"AliasedTableReferenceExpression"
,
"offset":"13,350"
}
]
}
,
{
"type":"GroupByClause"
,
"offset":"14,364"
,
"children":
[
"offset":"14,374"
,
"children":
[
{
"type":"Expression"
,
"offset":"14,374"
,
"expressiontext":"Postcode.Substring(0,4)"
}
]
]
}
]
}
]
}
,
{
"type":"OutputStatement"
,
"offset":"16,399"
,
"children":
[
{
"type":"SqlTableReference"
,
"offset":"16,409"
,
"children":
[
{
"type":"LocalObjectReference"
,
"offset":"16,409"
}
]
}
,
{
"type":"ToUnstructuredStreamClause"
,
"offset":"16,421"
,
"children":
[
{
"type":"FilePath"
,
"offset":"16,424"
,
"children":
[
{
"type":"ConstantExpression"
,
"offset":"16,424"
,
"expressiontext":"\"\/output\/PostcodeAreaTotals.csv\""
}
]
}
,
{
"type":"OrderByClause"
,
"offset":"17,457"
,
"children":
[
{
"type":"ExpressionSortItem"
,
"offset":"17,467"
,
"children":
[
{
"type":"Expression"
,
"offset":"17,467"
,
"expressiontext":"PostcodeArea"
}
]
}
]
}
]
}
,
{
"type":"UsingClause"
,
"offset":"18,484"
,
"children":
[
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"','"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"\"\\r\\n\""
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"Encoding.UTF8"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"false"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"true"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"\"O\""
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"null"
}
]
}
,
{
"type":"NameValuePair"
,
"children":
[
{
"type":"Expression"
,
"expressiontext":"true"
}
]
}
,
{
"type":"Expression"
,
"offset":"18,491"
,
"expressiontext":"Outputters.Csv(outputHeader:true)"
}
]
}
]
}
]
}
]
}
